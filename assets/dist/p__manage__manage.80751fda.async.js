(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{cwyM:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return M}));n("g9YV");var a=n("wCAj"),r=(n("Mwp2"),n("VXEj")),i=(n("IzEo"),n("bx4M")),o=(n("+BJd"),n("mr32")),s=(n("2qtc"),n("kLXV")),c=(n("giR+"),n("fyUT")),l=(n("OaEy"),n("2fM7")),u=(n("+L6B"),n("2/Rp")),d=(n("14J3"),n("BMrR")),p=(n("jCWc"),n("kPKH")),f=(n("P2fV"),n("NJEC")),y=(n("/zsF"),n("PArb")),h=n("hGi/"),m=(n("miYZ"),n("tsqr")),g=n("1OyB"),v=n("vuIU"),C=n("Ji7U"),E=n("LK+K"),b=(n("7Kak"),n("9yH6")),T=(n("5NDa"),n("5rEg")),k=n("q1tI"),S=n.n(k),w=n("wd/R"),O=n.n(w),j=n("fce+"),I=(T["a"].TextArea,b["a"].Group),x=[{name:"\u8bbe\u7f6e\u914d\u7f6e\u4f9d\u8d56\u89e3\u6790\u65f6\u95f4\uff08\u5206\u949f\uff09",value:1},{name:"\u76d1\u63a7\u5c55\u793aGrafana\u5730\u5740",value:2}],M=function(e){Object(C["a"])(n,e);var t=Object(E["a"])(n);function n(e){var a;return Object(g["a"])(this,n),a=t.call(this,e),a.GetCheckDep=function(){Object(j["a"])().then((function(e){return 0!==e.code?(m["a"].error(e.msg),!1):(a.setState({depRes:e.data}),!0)}))},a.GetSysConfig=function(){Object(j["c"])({sysType:1}).then((function(e){return 0!==e.code?(m["a"].error(e.msg),!1):(a.setState({sysConfig:e.data}),!0)}))},a.inputChange=function(e){console.log("inputChange",e),a.setState({setInt:e})},a.inputMonitorChange=function(e){console.log("inputMonitorChange",e.target.value),a.setState({monitorAddr:e.target.value,setStr:e.target.value})},a.inputMonitorCateChange=function(e){console.log("inputMonitorCateChange",e.target.value),a.setState({setCate:e.target.value})},a.onSelectType=function(e){console.log("onSelectType",e),a.setState({opType:e,sysType:e})},a.onSelectMonitorType=function(e){console.log("onSelectMonitorType",e),a.setState({setInt:e})},a.handleTimeSpanChange=function(){var e=a.state,t=e.sysType,n=void 0===t?0:t,r=e.setInt,i=void 0===r?0:r,o=e.setStr,s=void 0===o?"":o,c=e.setCate,l=void 0===c?"":c,u=e.id,d=void 0===u?0:u,p=!0;switch(n){case 1:p=!1;break;case 2:break;default:return void m["a"].error("\u7c7b\u578b\u9009\u62e9\u4e0d\u5408\u6cd5")}Object(j["e"])({id:d,sysType:n,setInt:i,setCate:p?l:"",setStr:p?s:""}).then((function(e){var t=e.code,n=e.msg;e.data;0===t?(m["a"].success("\u63d0\u4ea4\u6210\u529f\uff1a",n),a.GetSysConfig(),a.setState({isEdit:!1,isAdd:!1,sysType:0,setInt:0,setStr:""})):m["a"].error("\u63d0\u4ea4\u5931\u8d25:"+n)}))},a.handleCheckLog=function(e){console.log("click",e),Object(h["a"])(a.state),a.enterLoading(),Object(j["d"])({installType:1*e}).then((function(e){var t=e.code,n=e.msg;e.data;0===t?(m["a"].success("\u5b89\u88c5\u6210\u529f\uff1a",n),a.GetCheckDep()):m["a"].error("\u5b89\u88c5\u5931\u8d25:"+n),a.stopLoading()}))},a.typeChange=function(e){a.setState({sysTag:e.target.value})},a.enterLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.edit=function(e){var t=e.id,n=e.sysType,r=e.setInt,i=e.setStr,o=e.setCate;console.log(">>>>>>>>>> record",t,n,r,i),a.setState({isEdit:!0,sysType:n,setInt:r,setStr:i,setCate:o,id:t})},a.delete=function(e){console.log(">>>>>>>>>> id",e),Object(j["b"])({id:e}).then((function(e){var t=e.code,n=e.msg;e.data;0===t?(m["a"].success("\u5220\u9664\u6210\u529f\uff1a",n),a.GetSysConfig()):m["a"].error("\u5220\u9664\u5931\u8d25:"+n)}))},a.add=function(){a.setState({isAdd:!0,sysType:"",setInt:"",setStr:"",setCate:""})},a.cancel=function(){a.setState({isEdit:!1,isAdd:!1,sysType:0,setInt:0,setStr:"",setCate:""})},a.state={checkRes:"",depRes:[],sysType:1,setInt:0,setStr:"",sysConfig:[],opType:0,monitorAddr:"",loading:!1,isEdit:!1,isAdd:!1,sysTag:1,setCate:"",id:0},a}return Object(v["a"])(n,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){this.GetCheckDep(),this.GetSysConfig()}},{key:"render",value:function(){var e=this,t=this.state,n=(t.checkRes,t.depRes),h=void 0===n?[]:n,m=t.sysTag,g=void 0===m?0:m,v=t.opType,C=void 0===v?0:v,E=t.sysConfig,k=void 0===E?[]:E,w=t.loading,j=t.isAdd,M=void 0!==j&&j,G=t.isEdit,A=void 0!==G&&G,L=t.sysType,R=void 0===L?0:L,D=t.setInt,Y=void 0===D?0:D,_=t.setStr,B=void 0===_?"":_,J=t.setCate,P=void 0===J?"":J,W=this,H=2===C||2===R;console.log(">>>>>>>>>> render",R,Y,B,H);var K=[{title:"\u8bbe\u7f6e\u7c7b\u578b",dataIndex:"sysType",key:"sysType",width:200,render:function(e){return 1===e?"\u914d\u7f6e\u4f9d\u8d56\u89e3\u6790\u65f6\u95f4(\u5206\u949f)":2===e?"\u76d1\u63a7\u5c55\u793aGrafana\u5730\u5740":e}},{title:"\u8bbe\u7f6e\u7c7b\u522b",dataIndex:"setCate",key:"setCate",width:100,render:function(e,t){return 1===t.sysType?"\u65e0":e}},{title:"\u8bbe\u7f6e\u503c",dataIndex:"setInt",key:"setInt",width:100,render:function(e,t){return 2===t.sysType?"\u65e0":e}},{title:"\u8bbe\u7f6e\u5730\u5740",dataIndex:"setStr",key:"setStr",width:100,render:function(e,t){return 1===t.sysType?"\u65e0":e}},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"update_time",key:"update_time",width:200,render:function(e){return S.a.createElement("span",null,O()(e,"X").format("YYYY-MM-DD HH:mm:ss"))}},{title:"\u64cd\u4f5c",dataIndex:"option",key:"option",width:200,fixed:"right",render:function(e,t){return[S.a.createElement("a",{onClick:function(){W.edit(t)}},"\u7f16\u8f91"),S.a.createElement(y["a"],{type:"vertical"}),S.a.createElement(f["a"],{title:"\u4f60\u786e\u5b9a\u8981\u5220\u9664\u8be5\u914d\u7f6e\uff1f",onConfirm:function(){return W.delete(t.id)},okText:"\u6211\u5f88\u786e\u5b9a",cancelText:"\u7b97\u4e86"},S.a.createElement("a",null,"\u5220\u9664"))]}}];return S.a.createElement("div",null,S.a.createElement(i["a"],{title:"\u7cfb\u7edf\u7ba1\u7406"},S.a.createElement(d["a"],{gutter:24,className:"top",style:{marginTop:16,marginBottom:16}},S.a.createElement(p["a"],{span:22},S.a.createElement(I,{value:g,onChange:this.typeChange},S.a.createElement(b["a"],{value:1},"Pprof\u73af\u5883\u68c0\u6d4b\u548c\u5b89\u88c5"),S.a.createElement(b["a"],{value:2},"\u5176\u4ed6\u8bbe\u7f6e")))),2===g&&S.a.createElement(d["a"],{style:{marginTop:8}},S.a.createElement(u["default"],{type:"primary",onClick:this.add,style:{marginLeft:10}},"\u65b0\u589e")),2===g&&S.a.createElement(s["a"],{visible:A||M,onCancel:this.cancel,onOk:this.handleTimeSpanChange},S.a.createElement(d["a"],null,S.a.createElement(p["a"],{span:4,style:{fontWeight:"bold"}},"\u8bbe\u7f6e\u7c7b\u578b"),S.a.createElement(p["a"],{span:20},S.a.createElement(l["a"],{style:{width:200},onSelect:this.onSelectType,value:R,disabled:A},x.map((function(e){return S.a.createElement(l["a"].Option,{value:e.value},e.name)}))))),!H&&S.a.createElement(d["a"],{style:{marginTop:8}},S.a.createElement(p["a"],{span:4,style:{fontWeight:"bold"}},"\u8bbe\u7f6e\u65f6\u95f4"),S.a.createElement(p["a"],{span:20},S.a.createElement(c["a"],{placeholder:"\u8bbe\u7f6e\u914d\u7f6e\u4f9d\u8d56\u89e3\u6790\u65f6\u95f4\uff08\u5206\u949f\uff09",onChange:this.inputChange,disabled:!1,value:Y,style:{width:300}}))),H&&S.a.createElement(d["a"],{style:{marginTop:8}}," ",S.a.createElement(p["a"],{span:4,style:{fontWeight:"bold"}},"\u8bbe\u7f6e\u7c7b\u522b"),S.a.createElement(p["a"],{span:20},S.a.createElement(T["a"],{placeholder:"\u586b\u5199\u76d1\u63a7\u7c7b\u522b",onChange:this.inputMonitorCateChange,disabled:A,value:P,style:{width:400}}))),H&&S.a.createElement(d["a"],{style:{marginTop:8}}," ",S.a.createElement(p["a"],{span:4,style:{fontWeight:"bold"}},"\u8bbe\u7f6e\u5730\u5740"),S.a.createElement(p["a"],{span:20},S.a.createElement(T["a"],{placeholder:"\u8bbe\u7f6e\u76d1\u63a7Grafana\u5c55\u793a\u5730\u5740",onChange:this.inputMonitorChange,disabled:!1,value:B,style:{width:400}})))),1===g&&S.a.createElement(r["a"],{grid:{gutter:16,column:4},dataSource:h,renderItem:function(t){return S.a.createElement(r["a"].Item,null,S.a.createElement(i["a"],{title:t.name},1===t.check_res&&S.a.createElement(o["a"],{color:"green",key:2},"\u5df2\u5b89\u88c5"),0===t.check_res&&S.a.createElement(o["a"],{color:"geekblue",key:1},"\u672a\u5b89\u88c5"),0===t.check_res&&t.can_install>0&&S.a.createElement(f["a"],{placement:"rightBottom",title:"\u8be5\u64cd\u4f5c\u6709\u4e00\u5b9a\u7684\u5ef6\u8fdf\uff0c\u786e\u8ba4\u64cd\u4f5c\uff1f",onConfirm:function(){e.handleCheckLog(t.can_install)},okText:"Yes",cancelText:"No"},S.a.createElement(u["default"],{type:"primary",loading:w},"\u5b89\u88c5"))))}}),2===g&&S.a.createElement(a["a"],{style:{marginTop:"12px"},columns:K,dataSource:k})))}}]),n}(S.a.PureComponent)},"fce+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"e",(function(){return y})),n.d(t,"b",(function(){return m}));var a=n("o0o1"),r=n.n(a),i=n("HaE+"),o=n("t3Un"),s=n("Qyje");function c(){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["a"])("/api/admin/pprof/dep/check"));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["a"])("/api/admin/pprof/dep/install?".concat(Object(s["stringify"])(t))));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(i["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["a"])("/api/admin/pprof/config/list?".concat(Object(s["stringify"])(t))));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function y(e){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["a"])("/api/admin/pprof/config/update",{method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function m(e){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(r.a.mark((function e(t){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(o["a"])("/api/admin/pprof/config/delete?".concat(Object(s["stringify"])(t))));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}}}]);